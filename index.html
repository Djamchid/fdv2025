<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La F√™te des Voisins 2025 - 25 ans</title>
    <!-- En-t√™tes de s√©curit√© - X-Frame-Options supprim√© des meta -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; connect-src 'self' https://script.google.com https://*.googleusercontent.com; img-src 'self' data:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <!-- Scripts externes -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <!-- Lien vers la feuille de style externe -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div>
            <h1 style="font-size: 2.5rem; margin-bottom: 10px;">La F√™te des Voisins</h1>
            <div style="background-color: var(--primary); height: 4px; width: 200px; margin: 0 auto 10px;"></div>
            <h2 style="color: var(--primary); font-size: 1.8rem; margin-bottom: 10px;">25 ans</h2>
            <p>Vendredi 23 mai 2025 √† 19h</p>
        </div>
    </header>

    <div class="container">
        <div class="banner">
            <div class="cake">üéÇ</div>
            <h1>F√™tons 25 ans de convivialit√©!</h1>
            <h2>22 rue Guilleminot, 92370 Chaville</h2>
            <button class="btn" id="openModalBtn">S'inscrire maintenant</button>
        </div>

        <div class="grid">
            <div class="info-box">
                <h2>√Ä propos de l'√©v√©nement</h2>
                <p>La F√™te des Voisins c√©l√®bre ses 25 ans cette ann√©e! C'est l'occasion parfaite pour rencontrer vos voisins, partager un repas convivial et cr√©er des liens dans notre quartier.</p>
                <p><strong>Date:</strong> Vendredi 23 mai 2025</p>
                <p><strong>Heure:</strong> 19h</p>
                <p><strong>Lieu:</strong> 22 rue Guilleminot, 92370 Chaville</p>
                <p><strong>Organisateurs:</strong> Xueling et Djamchid DaliLi</p>
                <p><strong>Contact:</strong> WhatsApp 0615020076</p>
                
                <div class="recommendations">
                    <h3>Comment participer?</h3>
                    <p>Pour que la f√™te soit r√©ussie, chacun est invit√© √† apporter quelque chose √† partager. Inscrivez-vous via le formulaire et indiquez ce que vous souhaitez apporter!</p>
                </div>
                
                <div class="recommendations" style="background-color: #dcf8c6; border-left: 4px solid #25d366; margin-top: 1.5rem; padding: 1.2rem;">
                    <h3 style="display: flex; align-items: center;">
                        <span style="font-size: 1.5rem; margin-right: 10px;">üì±</span>
                        Rejoignez notre groupe WhatsApp !
                    </h3>
                    <p>Pour recevoir toutes les informations en temps r√©el et rester en contact avec les participants :</p>
                    <p style="margin-top: 0.8rem;">
                        <a id="whatsapp-link" href="#" style="display: inline-block; background-color: #25d366; color: white; padding: 0.75rem 1.5rem; border-radius: 50px; text-decoration: none; font-weight: bold; transition: all 0.3s ease;">
                            <span style="font-size: 1.1rem;">Rejoindre le groupe WhatsApp</span>
                        </a>
                    </p>
                </div>
                
                <div class="privacy-notice">
                    <p>En vous inscrivant, vous acceptez notre <a href="#" id="openPrivacyBtn">politique de confidentialit√©</a>.</p>
                </div>
            </div>

            <div class="info-box">
                <h2>Recommandations</h2>
                <p>Pour que tout le monde profite de la f√™te, voici quelques suggestions sur les quantit√©s √† apporter :</p>
                
                <div class="category-box">
                    <div class="category-title">Sal√© ü•®</div>
                    <ul>
                        <li>Quiche/tarte sal√©e : 1 pour 6-8 personnes</li>
                        <li>Plateau de charcuterie : 100g par personne</li>
                        <li>Sandwichs/wraps : 2-3 pi√®ces par personne</li>
                        <li>Salade compos√©e : 1 saladier pour 8-10 personnes</li>
                    </ul>
                </div>
                
                <div class="category-box">
                    <div class="category-title">Sucr√© üç∞</div>
                    <ul>
                        <li>G√¢teau/tarte : 1 pour 8-10 personnes</li>
                        <li>Petits g√¢teaux/cookies : 2-3 par personne</li>
                        <li>Fruits : 100g par personne</li>
                    </ul>
                </div>
                
                <div class="category-box">
                    <div class="category-title">Boissons ü•§</div>
                    <ul>
                        <li>Soft drinks : 50cl par personne</li>
                        <li>Vin : 1 bouteille pour 4-5 personnes</li>
                        <li>Bi√®re : 1-2 canettes/bouteilles par personne</li>
                        <li>Eau : 50cl par personne</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="info-box">
            <h2>Ce que les voisins apportent</h2>
            <p>Voici ce que tout le monde a pr√©vu d'apporter. N'h√©sitez pas √† vous inscrire pour compl√©ter !</p>
            
            <div class="category-box">
                <div class="category-title">ü•™ Sal√©</div>
                <ul class="contributions-list" id="saleList">
                    <li>Chargement des donn√©es...</li>
                </ul>
                <div class="category-total">Total: <span id="saleTotal">0</span> portions</div>
                <div class="meter">
                    <span id="saleMeter" style="width: 0%"></span>
                </div>
            </div>
            
            <div class="category-box">
                <div class="category-title">üç∞ Sucr√©</div>
                <ul class="contributions-list" id="sucreList">
                    <li>Chargement des donn√©es...</li>
                </ul>
                <div class="category-total">Total: <span id="sucreTotal">0</span> portions</div>
                <div class="meter">
                    <span id="sucreMeter" style="width: 0%"></span>
                </div>
            </div>
            
            <div class="category-box">
                <div class="category-title">ü•§ Boissons non alcoolis√©es</div>
                <ul class="contributions-list" id="softList">
                    <li>Chargement des donn√©es...</li>
                </ul>
                <div class="category-total">Total: <span id="softTotal">0</span> portions</div>
                <div class="meter">
                    <span id="softMeter" style="width: 0%"></span>
                </div>
            </div>
            
            <div class="category-box">
                <div class="category-title">üç∑ Boissons alcoolis√©es</div>
                <ul class="contributions-list" id="alcoList">
                    <li>Chargement des donn√©es...</li>
                </ul>
                <div class="category-total">Total: <span id="alcoTotal">0</span> portions</div>
                <div class="meter">
                    <span id="alcoMeter" style="width: 0%"></span>
                </div>
            </div>
            
            <div class="recommendations">
                <h3>√âquilibre des contributions</h3>
                <p>Pour l'instant, nous manquons de : <span id="missingItems">chargement...</span></p>
            </div>
        </div>
    </div>

    <!-- Modal pour l'inscription -->
    <div id="inscriptionModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Inscrivez-vous √† la f√™te</h2>
            <p style="margin-bottom: 1rem;">Les champs marqu√©s d'un <span class="required-field">*</span> sont obligatoires</p>
            <div id="formSuccess" class="success" style="display: none;">Merci pour votre inscription! Votre contribution a √©t√© ajout√©e.</div>
            <form id="inscriptionForm">
                <!-- Jeton anti-CSRF cach√© -->
                <input type="hidden" id="csrfToken" name="csrfToken">
                
                <label for="nom">Nom et pr√©nom <span class="required-field">*</span></label>
                <input type="text" id="nom" name="nom" required maxlength="100">
                
                <label for="email">Email <span class="required-field">*</span></label>
                <input type="email" id="email" name="email" required maxlength="100">
                
                <label for="telephone">T√©l√©phone <span class="required-field">*</span></label>
                <input type="tel" id="telephone" name="telephone" required pattern="[0-9]{10}" placeholder="0612345678">
                
                <label for="nbPersonnes">Nombre de personnes <span class="required-field">*</span></label>
                <input type="number" id="nbPersonnes" name="nbPersonnes" min="1" max="20" value="1" required>
                
                <label for="categorie">Cat√©gorie <span class="required-field">*</span></label>
                <select id="categorie" name="categorie" required>
                    <option value="">Choisissez une cat√©gorie</option>
                    <option value="sale">Sal√©</option>
                    <option value="sucre">Sucr√©</option>
                    <option value="soft">Boissons non alcoolis√©es</option>
                    <option value="alco">Boissons alcoolis√©es</option>
                </select>
                
                <div id="detailsContainer" style="display: none;">
                    <label for="detail">Que comptez-vous apporter ? <span class="required-field">*</span></label>
                    <input type="text" id="detail" name="detail" placeholder="Ex: Quiche lorraine, g√¢teau au chocolat..." maxlength="200" required>
                    
                    <label for="portions">Nombre de portions <span class="required-field">*</span></label>
                    <input type="number" id="portions" name="portions" min="1" max="100" value="1" required>
                </div>
                
                <label for="commentaire">Commentaire</label>
                <textarea id="commentaire" name="commentaire" rows="3" maxlength="500"></textarea>
                
                <div id="formError" class="error" style="display: none;"></div>
                
                <button type="submit" class="btn">S'inscrire</button>
            </form>
        </div>
    </div>

    <!-- Modal pour la politique de confidentialit√© -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Politique de confidentialit√©</h2>
            <div style="max-height: 400px; overflow-y: auto; padding: 1rem;">
                <h3>Collecte et utilisation des donn√©es</h3>
                <p>Dans le cadre de l'organisation de La F√™te des Voisins 2025, nous collectons les informations suivantes :</p>
                <ul>
                    <li>Nom et pr√©nom</li>
                    <li>Adresse email</li>
                    <li>Num√©ro de t√©l√©phone</li>
                    <li>Nombre de personnes participantes</li>
                    <li>Type de contribution √† l'√©v√©nement</li>
                </ul>
                <p>Ces informations sont utilis√©es exclusivement pour :</p>
                <ul>
                    <li>Organiser l'√©v√©nement et la r√©partition des contributions</li>
                    <li>Communiquer avec vous concernant l'√©v√©nement</li>
                    <li>G√©rer la logistique de la f√™te</li>
                </ul>
                
                <h3>Stockage et s√©curit√©</h3>
                <p>Les donn√©es sont stock√©es dans un Google Sheet s√©curis√© accessible uniquement aux organisateurs de l'√©v√©nement. Nous mettons en ≈ìuvre des mesures de s√©curit√© pour prot√©ger vos informations.</p>
                
                <h3>Partage des donn√©es</h3>
                <p>Vos informations ne seront pas partag√©es avec des tiers √† des fins commerciales. Seules les informations indispensables √† l'organisation sont partag√©es entre voisins (nom et contribution apport√©e).</p>
                
                <h3>Conservation des donn√©es</h3>
                <p>Les donn√©es seront conserv√©es jusqu'√† 3 mois apr√®s l'√©v√©nement, puis supprim√©es.</p>
                
                <h3>Vos droits</h3>
                <p>Conform√©ment au R√®glement G√©n√©ral sur la Protection des Donn√©es (RGPD), vous disposez d'un droit d'acc√®s, de rectification et de suppression de vos donn√©es. Pour exercer ces droits, contactez les organisateurs √† l'adresse email ou au num√©ro de t√©l√©phone indiqu√©s sur cette page.</p>
                
                <h3>Consentement</h3>
                <p>En vous inscrivant √† cet √©v√©nement via ce formulaire, vous consentez √† la collecte et au traitement de vos donn√©es comme d√©crit dans cette politique.</p>
            </div>
            <button class="btn" id="closePrivacyBtn" style="margin-top: 1rem;">J'ai compris</button>
        </div>
    </div>

    <footer>
        <p>La F√™te des Voisins 2025 - 25√®me anniversaire</p>
        <p>Organis√© par Xueling et Djamchid DaliLi</p>
        <p>Contact: 0615020076</p>
        <p><a href="https://www.lafetedesvoisins.fr" style="color: white;" target="_blank" rel="noopener noreferrer">www.lafetedesvoisins.fr</a></p>
    </footer>

    <!-- Lien vers le script externe -->
    <script src="script.js"></script>
<!-- Ajoutez cet iframe juste avant la fermeture de la balise body (</body>) -->
<iframe id="hiddenSubmitFrame" name="hiddenSubmitFrame" style="display:none;"></iframe>

<!-- Le reste du fichier HTML reste inchang√© -->
</body>
</html>
